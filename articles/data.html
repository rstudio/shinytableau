<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessing data from Tableau • shinytableau</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Accessing data from Tableau">
<meta property="og:description" content="shinytableau">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shinytableau</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Development version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorial
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/shinytableau.html">Introduction to shinytableau</a>
    </li>
    <li>
      <a href="../articles/helloworld.html">Writing your first extension</a>
    </li>
    <li>
      <a href="../articles/config.html">Adding configuration settings</a>
    </li>
    <li>
      <a href="../articles/data.html">Accessing data from Tableau</a>
    </li>
    <li>
      <a href="../articles/example.html">Full ggviolin example</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ui.html">UI considerations</a>
    </li>
    <li>
      <a href="../articles/deployment.html">Deployment</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rstudio/shinytableau">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="data_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="data_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="data_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Accessing data from Tableau</h1>
            
      
      
      <div class="hidden name"><code>data.Rmd</code></div>

    </div>

    
    
<style type="text/css">
p>img:first-child:last-child {
  display: block;
  margin-left: auto;
  margin-right: auto;
  border: none;
}
video {
  display: block;
  padding: 0;
  border: 1px solid #AAA;
  margin: 1em auto;
  width: 100%;
  box-sizing: border-box;
}
</style>
<p><a name="datasummary"></a>Now that we’ve created an app that reads/writes settings, we’re ready to take a big step forward and actually access a data table from Tableau. Our next example app will ask the Tableau dashboard author to choose a data table, and it will show a rich summary of each column of data, using the <a href="https://github.com/dcomtois/summarytools">summarytools</a> R package.</p>
<p><img src="datasummary.png" width="537"></p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="co"># filetype: shinyApp</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://shiny.rstudio.com">shiny</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">shinytableau</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/promises">promises</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dcomtois/summarytools">summarytools</a></span><span class="op">)</span>

<span class="va">manifest</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/yaml_skeleton.html">tableau_manifest_from_yaml</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">req</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/fluidPage.html">fluidPage</a></span><span class="op">(</span>theme <span class="op">=</span> <span class="fu"><a href="../reference/shinytableau_theme.html">shinytableau_theme</a></span><span class="op">(</span><span class="op">)</span>,
    <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/htmlOutput.html">uiOutput</a></span><span class="op">(</span><span class="st">"summary"</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reactive_tableau_data.html">reactive_tableau_data</a></span><span class="op">(</span><span class="st">"data_spec"</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>includeAllColumns <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>

  <span class="va">output</span><span class="op">$</span><span class="va">summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/renderUI.html">renderUI</a></span><span class="op">(</span><span class="op">{</span>
    <span class="co"># From https://cran.r-project.org/web/packages/summarytools/vignettes/Introduction.html#creating-shiny-apps</span>
    <span class="fu"><a href="https://rdrr.io/r/stats/Fdist.html">df</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%...&gt;%</span>
      <span class="fu"><a href="https://rdrr.io/pkg/summarytools/man/dfSummary.html">dfSummary</a></span><span class="op">(</span>varnumbers <span class="op">=</span> <span class="cn">FALSE</span>, valid.col <span class="op">=</span> <span class="cn">FALSE</span>, graph.magnif <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">%...&gt;%</span>
      <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"render"</span>, headings <span class="op">=</span> <span class="cn">TRUE</span>, Data.frame <span class="op">=</span> <span class="cn">NULL</span>,
        footnote <span class="op">=</span> <span class="cn">NA</span>, bootstrap.css <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
  <span class="op">}</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">config_ui</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">req</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/tag.html">tagList</a></span><span class="op">(</span>
    <span class="fu"><a href="../reference/choose_data_ui.html">choose_data_ui</a></span><span class="op">(</span><span class="st">"data_spec"</span>, <span class="st">"Choose data"</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="va">config_server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span>, <span class="va">iv</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">data_spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/choose_data_ui.html">choose_data</a></span><span class="op">(</span><span class="st">"data_spec"</span>, iv <span class="op">=</span> <span class="va">iv</span><span class="op">)</span>

  <span class="va">save_settings</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="../reference/update_tableau_settings_async.html">update_tableau_settings_async</a></span><span class="op">(</span>
      data_spec <span class="op">=</span> <span class="fu">data_spec</span><span class="op">(</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span>
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">save_settings</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu"><a href="../reference/tableau_extension.html">tableau_extension</a></span><span class="op">(</span><span class="va">manifest</span>, <span class="va">ui</span>, <span class="va">server</span>, <span class="va">config_ui</span>, <span class="va">config_server</span>,
  options <span class="op">=</span> <span class="fu"><a href="../reference/ext_options.html">ext_options</a></span><span class="op">(</span>port <span class="op">=</span> <span class="fl">4567</span><span class="op">)</span>
<span class="op">)</span></pre></div>
<p>In order to understand how this example app works, we’ll first need to look at how Tableau data is organized.</p>
<div id="categories-of-data" class="section level2">
<h2 class="hasAnchor">
<a href="#categories-of-data" class="anchor"></a>Categories of data</h2>
<p>Tableau’s Extension API allows dashboard extensions, like the ones we’re creating, to access data from the workbook they’re embedded in. Actually, there’s one big caveat to that: we can’t access just <em>any</em> data, we can <em>only</em> access data via worksheets that are present in our same dashboard.</p>
<p>This means you can’t start a new (empty) dashboard, put an extension object on it, and expect that extension object to be able to access any data. Instead, <strong>you need to add one or more worksheets to the dashboard first</strong>. Now, the extension object can access the data used by those worksheets.</p>
<p>Each worksheet makes three categories of data available to us:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Summary data:</strong> The data in its final form before visualization. If the visualization aggregates measures, then the summary data contains the data after aggregation has been performed. If the worksheet has an active selection, then by default, only the selected data is returned (set the <code>ignoreSelection</code> option to <code>TRUE</code> to retrieve all data).</p></li>
<li>
<p><strong>Underlying data:</strong> The underlying data that is used in the visualization, before aggregation operations are performed but after tables are joined.</p>
<p>By default, only the columns that are used in the worksheet are included (set <code>includeAllColumns</code> to <code>TRUE</code> if you need them all). If the worksheet has an active selection, then by default, only the selected data is returned (set the <code>ignoreSelection</code> option to <code>TRUE</code> to retrieve all data).</p>
</li>
<li><p><strong>Data source:</strong> You can also access the raw data from the data source(s) used by the worksheet. This data is unaffected by the worksheet settings. Tableau data sources are broken into one or more logical tables, like how a relational database has multiple tables.</p></li>
</ol>
<p>As an R user, you may find this analogy based on the <a href="https://dplyr.tidyverse.org/reference/mutate-joins.html#examples">examples from <code>?dplyr::mutate-joins</code></a> to be helpful in explaining the relationship between data source, underlying, and summary data:</p>
<pre><code># Data source
logical1 &lt;- band_members
logical2 &lt;- band_instruments

# Underlying is joined/selected, but not aggregated
underlying &lt;- band_members %&gt;%
  full_join(band_instruments, by = "name") %&gt;%
  select(band, name)

# Summary is underlying plus aggregation
summary &lt;- underlying %&gt;%
  group_by(band) %&gt;%
  tally(name = "COUNT(name)")</code></pre>
<p>The existence of these three levels of data granularity, plus the fact that the underlying and data source levels need additional specification to narrow down which of the multiple data tables at each level are desired, means that it’s surprisingly complicated to specify what data you want:</p>
<p>(Deep breath…)</p>
<p>First, you need to identify the worksheet you care about. Then, whether you want summary, underlying, or data source data. If underlying, there may be more than one table involved, in which case you’ll need to specify which one. If data source, there may be multiple data sources to choose from, and potentially more than one logical table per data source.</p>
<p>Don’t worry, you don’t need to remember all of that, because most of the time you’ll just use…</p>
</div>
<div id="the-choose_data-module" class="section level2">
<h2 class="hasAnchor">
<a href="#the-choose_data-module" class="anchor"></a>The <code>choose_data</code> module</h2>
<p>Most shinytableau extensions are going to want to let the Tableau dashboard author choose the data they’re interested in. Constructing the UI to lead the user through the above chain of decisions is complicated; therefore, we’ve done it for you by providing a <code>choose_data</code> Shiny module that you can use in your config dialogs.</p>
<p><img src="choose_data.png" width="450"></p>
<p>Like most <a href="https://shiny.rstudio.com/articles/modules.html">Shiny modules</a>, the <code>choose_data</code> module is actually two functions: a UI function, <code>choose_data_ui</code>; and a server function, <code>choose_data</code>. In the example above, they’re invoked like this in the <code>config_ui</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="../reference/choose_data_ui.html">choose_data_ui</a></span><span class="op">(</span><span class="st">"data_spec"</span>, <span class="st">"Choose data"</span><span class="op">)</span></pre></div>
<p>and this in the <code>config_server</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">data_spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/choose_data_ui.html">choose_data</a></span><span class="op">(</span><span class="st">"data_spec"</span>, iv <span class="op">=</span> <span class="va">iv</span><span class="op">)</span></pre></div>
<p>The <code>"data_spec"</code> string is just an id that needs to match between the two function calls. If you want to present multiple data choosers simultaneously, just call <code>choose_data_ui</code> and <code>choose_data</code> multiple times, using a different id for each pair of calls.</p>
<p>The return value of <code>choose_data</code>, which we’ve named <code>data_spec</code> here, is a reactive expression that returns a “spec” object, whose purpose we will discuss in a moment.</p>
<p>As the author of the extension, you may want to restrict the Tableau authors’ choices to ones that make sense. For example, if your extension is only designed to work with underlying data and not summary or data source data, you can remove the latter choices using <code>choose_data_options</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">data_spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/choose_data_ui.html">choose_data</a></span><span class="op">(</span><span class="st">"data_spec"</span>,
  options <span class="op">=</span> <span class="fu"><a href="../reference/choose_data_options.html">choose_data_options</a></span><span class="op">(</span>aggregation <span class="op">=</span> <span class="st">"underlying"</span><span class="op">)</span>,
  iv <span class="op">=</span> <span class="va">iv</span><span class="op">)</span></pre></div>
<p>Once the user has confirmed their choice, this extension saves the resulting spec as a setting:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">save_settings</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/update_tableau_settings_async.html">update_tableau_settings_async</a></span><span class="op">(</span>
    data_spec <span class="op">=</span> <span class="fu">data_spec</span><span class="op">(</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span></pre></div>
<p>Note that we want to persist the <em>value</em> of the <code>data_spec</code> reactive expression, so we call it like a function: <code>data_spec()</code>.</p>
</div>
<div id="accessing-a-data-table" class="section level2">
<h2 class="hasAnchor">
<a href="#accessing-a-data-table" class="anchor"></a>Accessing a data table</h2>
<p>We turn our attention now to consuming data, using the <code><a href="../reference/reactive_tableau_data.html">reactive_tableau_data()</a></code> function. This function is called from the <code>server</code> and <code>config_server</code> functions, and returns a reactive expression that can be used to access the actual data (though there are complications in actually getting the data, more on this below).</p>
<div id="calling-reactive_tableau_data" class="section level3">
<h3 class="hasAnchor">
<a href="#calling-reactive_tableau_data" class="anchor"></a>Calling <code>reactive_tableau_data()</code>
</h3>
<p>The first argument you need to pass to <code><a href="../reference/reactive_tableau_data.html">reactive_tableau_data()</a></code> is <code>spec</code>; it specifies what data you’re looking for, and you can provide it in a number of ways.</p>
<ol style="list-style-type: decimal">
<li>
<p>You can pass <strong>the <code>data_spec</code> reactive expression returned from <code><a href="../reference/choose_data_ui.html">choose_data()</a></code></strong>. This approach should be used when you want your config dialog to show a real-time preview of the choices returned by <code>choose_data</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">data_spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/choose_data_ui.html">choose_data</a></span><span class="op">(</span><span class="st">"data_spec"</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reactive_tableau_data.html">reactive_tableau_data</a></span><span class="op">(</span><span class="va">data_spec</span><span class="op">)</span></pre></div>
<p>Note that we’re not passing <code>data_spec()</code>, but <code>data_spec</code>. This is because we want to pass not just a <em>snapshot</em> of the user’s choices, but to give this <code>reactive_tableau_data</code> access to the current <em>and future</em> choices.</p>
</li>
<li>
<p>You can pass <strong>the name of a setting</strong> where a spec object has been persisted. This approach is what you’re generally going to want to do from <code>server</code>.</p>
<p>From the example above:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reactive_tableau_data.html">reactive_tableau_data</a></span><span class="op">(</span><span class="st">"data_spec"</span><span class="op">)</span></pre></div>
<p>(This is essentially a shorthand for <code>reactive_tableau_data(reactive(tableau_setting("data_spec"))))</code>, which is a construction so awkward that, even now, it’s difficult for me to not delete this sentence.)</p>
</li>
<li><p>Finally, you can construct a spec object <strong>from scratch</strong> using one of the <code><a href="../reference/spec_summary.html">spec_summary()</a></code>, <code><a href="../reference/spec_summary.html">spec_underlying()</a></code>, or <code><a href="../reference/spec_summary.html">spec_datasource()</a></code> functions. You’ll need to provide the name of the worksheet/underlying table/etc. This could be useful for extensions that are created specifically for a particular dashboard.</p></li>
</ol>
</div>
<div id="using-the-return-value" class="section level3">
<h3 class="hasAnchor">
<a href="#using-the-return-value" class="anchor"></a>Using the return value</h3>
<p>The value returned by <code>reactive_tableau_data</code> has a couple of complications. Let’s look again at the <code>server</code> of our data summary example extension (where <code>df</code> is the <code>reactive_tableau_data</code> return value):</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/stats/Fdist.html">df</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%...&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/summarytools/man/dfSummary.html">dfSummary</a></span><span class="op">(</span>varnumbers <span class="op">=</span> <span class="cn">FALSE</span>, valid.col <span class="op">=</span> <span class="cn">FALSE</span>, graph.magnif <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">%...&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"render"</span>, headings <span class="op">=</span> <span class="cn">TRUE</span>, bootstrap.css <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></pre></div>
<p>First, because it’s a reactive expression, <code>df</code> needs to be called like a function if you want to access its value. This is par for the course when writing a Shiny app.</p>
<p>Second, the value returned by <code><a href="https://rdrr.io/r/stats/Fdist.html">df()</a></code> is still not the data frame object we’re trying to get to. Instead, it’s a <strong>promise object</strong>, from the <a href="https://rstudio.github.io/promises/">promises package</a>. Promises operate quite contrary to the normal programmer’s intuition, so if this is your first exposure to promises and asynchronous programming, it’s imperative that you read at least the <a href="https://rstudio.github.io/promises/articles/intro.html">introduction</a> and <a href="https://rstudio.github.io/promises/articles/overview.html">overview</a> vignettes.</p>
<p>For simple pipelines like the above, you can replace <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code> with <code><a href="https://rstudio.github.io/promises/reference/pipes.html">%...&gt;%</a></code> and it will generally work. If you need to reference the data frame multiple times, as one often does, then you can use this form:</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/stats/Fdist.html">df</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rstudio.github.io/promises/reference/then.html">then</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">actual_data_frame</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># Do various things with actual_data_frame</span>
<span class="op">}</span><span class="op">)</span></pre></div>
<p>(Please change <code>actual_data_frame</code> to whatever variable name is suitable for your app.)</p>
<div class="nextstep">
<p><strong>Next step:</strong> <a href="example.html">Putting it all together</a></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joe Cheng, Richard Iannone, Javier Luraschi,  RStudio.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
